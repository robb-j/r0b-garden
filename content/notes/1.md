---
refs:
  mastodon_status:
    [
      '110904638173868569',
      '110904655077568821',
      '110905794670500793',
      '110905818647246537'
    ]
date: 2023-08-17T11:07:59.955Z
media: []
tags: []
---

<p>Doing some C++ at work and wow itâ€™s hard to go back to from JavaScript ðŸ˜‚ making me manage my own memory and actually plan my data structuresðŸ˜…</p>

<p>Although Iâ€™m working on an interesting library to add a basic JavaScript runtime to ESP microcontrollers to make their software malleable. So overall less C++ needed, which is pretty cool!</p>

<p>Yesterday I got it to run a â€œconsole.log(â€˜hello worldâ€™) and today Iâ€™ve been getting some timers involved. The current target script is:</p><p>console.log('starting at ' + Date.now())</p><p>setTimeout(<br>  () =&gt; console.log('done at ' + Date.now()), <br>  1000<br>)</p><p>Iâ€™ve had to make my own internal timers and track the active ones to keep the program alive until theyâ€™re all complete. And it needs to call the right js function  at the right time too!</p>

<p>The microcontroller doesnâ€™t know about time, so Iâ€™ve added dodgy hack to override Date.now() in JavaScript to return the milliseconds since boot</p>
